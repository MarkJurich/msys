#! /bin/sh

CURDIR=`pwd`

. ${CURDIR}/mingwPORT.functions

ask "PACKAGE" "" PACKAGE
ask "VERSION" "" VERSION
ask "ARCHIVETYPE" "tar.gz" ARCHIVETYPE
ask "ARCHIVEFILE" "$PACKAGE-$VERSION.$ARCHIVETYPE" ARCHIVEFILE
ask "ARCHIVEHOME" "http:/www.${PACKAGE}.org" ARCHIVEHOME
ask "ARCHIVEPATH" "/tmp" ARCHIVEPATH
ask "DOWNLOADURI" "http://ftp.gnu.org/gnu/$PACKAGE" DOWNLOADURI
ask "SRCDIR" "/usr/src/${PACKAGE}-${VERSION}" SRCDIR
ask "BLDDIR" "./bld" BLDDIR
ask "PREFIX" "/mingw" PREFIX
ask "CFLAGS" "-O3 -s -mms-bitfields -march=\`uname -m\`" CFLAGS
ask "CXXFLAGS" "\$CFLAGS" CXXFLAGS

PORTPATH=${SRCDIR}/mingwPORT
ask "PORTPATH" "$PORTPATH" PORTPATH

if [ ! -d $PORTPATH ]
then
  mkdir -p $PORTPATH
fi
cat <<EOD>$PORTPATH/mingwPORT.ini
PACKAGE=$PACKAGE
VERSION=$VERSION
ARCHIVETYPE=$ARCHIVETYPE
ARCHIVEFILE=$ARCHIVEFILE
ARCHIVEPATH=$ARCHIVEPATH
ARCIVEHOME=$ARCHIVEHOME
DOWNLOADURI=$DOWNLOADURI
SRCDIR=$SRCDIR
BLDDIR=$BLDDIR
PREFIX=$PREFIX
CFLAGS="$CFLAGS"
CXXFLAGS="$CXXFLAGS"
EOD
cat mingwPORT.README | sed -e "s@\[PACKAGEFILE\]@${ARCHIVEFILE}@" -e "s@\[PACKAGEHOME\]@${ARCHIVEHOME}@" > $PORTPATH/mingwPORT.README
cp mingwPORT.question $PORTPATH
cp mingwPORT.afterquestion $PORTPATH
cp mingwPORT.configure $PORTPATH
cp mingwPORT.make $PORTPATH
cp mingwPORT.install $PORTPATH
cp mingwPORT.cleanup $PORTPATH
cp mingwPORT.sh $PORTPATH
cp mingwPORT.functions $PORTPATH
cp mingwPORT.exports $PORTPATH
cp mirrors.sf $PORTPATH
